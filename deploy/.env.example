###############################################
# Arboris 部署示例环境变量（复制为 deploy/.env 后修改）
###############################################

# 基础
APP_PORT=8080
ENVIRONMENT=production
DEBUG=false
LOGGING_LEVEL=INFO
# [必需] 用于 JWT token 等安全功能的加密密钥。
# 警告：为了生产环境的安全，请务必将其修改为一个长且随机的复杂字符串！
# 您可以使用此命令生成: openssl rand -hex 32
SECRET_KEY=please-change-to-a-random-long-string

# 管理员初始化（首次无管理员时生效；之后请到后台改密或用脚本重置）
ADMIN_DEFAULT_USERNAME=admin
ADMIN_DEFAULT_PASSWORD=ChangeMe123!
ADMIN_DEFAULT_EMAIL=admin@example.com

# -------------------------------------------------------------------
# B. 数据库配置
# -------------------------------------------------------------------
# [必需] 选择数据库类型。可选值: "sqlite", "mysql"。
# 默认为 "sqlite"，这是最简单的配置，无需外部数据库服务。
DB_PROVIDER=sqlite

# --- B1. SQLite 配置 (默认) ---
# [可选] SQLite 数据库文件的存储位置。
# 如果留空或注释掉，将使用名为 'sqlite-data' 的 Docker 卷进行持久化。
# 若希望存储在宿主机上，可设置为路径，例如: ./storage
# SQLITE_STORAGE_SOURCE=./storage

# MySQL 场景（DB_PROVIDER=mysql 时生效）
MYSQL_HOST=db
MYSQL_PORT=3306
MYSQL_USER=arboris
MYSQL_PASSWORD=ChangeMe_Password123
MYSQL_DATABASE=arboris

# LLM 默认配置（会在首次启动注入到 system_configs）
OPENAI_API_KEY=sk-xxx
OPENAI_API_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL_NAME=gpt-4o-mini
WRITER_CHAPTER_VERSION_COUNT=2

# 嵌入向量（可选）
EMBEDDING_PROVIDER=openai
EMBEDDING_BASE_URL=https://api.openai.com/v1
EMBEDDING_API_KEY=${OPENAI_API_KEY}
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_MODEL_VECTOR_SIZE=3072

# SMTP（开启注册需要）
ALLOW_USER_REGISTRATION=false
SMTP_SERVER=smtp.example.com
SMTP_PORT=465
SMTP_USERNAME=no-reply@example.com
SMTP_PASSWORD=
EMAIL_FROM=Arboris

# -------------------------------------------------------------------
# C. 向量库（RAG）配置 - 推荐 Qdrant
# -------------------------------------------------------------------
# 选择向量库提供方：libsql 或 qdrant（推荐）
VECTOR_DB_PROVIDER=qdrant

# Qdrant 服务地址（容器内部可用 http://qdrant:6333）
VECTOR_DB_URL=http://qdrant:6333
# 若使用托管 Qdrant，可在此填写 API Key
VECTOR_DB_AUTH_TOKEN=
# 集合名前缀（将派生 <prefix>_chunks 与 <prefix>_summaries）
QDRANT_COLLECTION_PREFIX=arboris

# 召回规模与切分参数（按需调整）
VECTOR_TOP_K_CHUNKS=5
VECTOR_TOP_K_SUMMARIES=3
VECTOR_CHUNK_SIZE=480
VECTOR_CHUNK_OVERLAP=120

# 其他可选（Linux.do 登录）
ENABLE_LINUXDO_LOGIN=false
LINUXDO_CLIENT_ID=
LINUXDO_CLIENT_SECRET=
LINUXDO_REDIRECT_URI=
LINUXDO_AUTH_URL=https://connect.linux.do/oauth2/authorize
LINUXDO_TOKEN_URL=https://connect.linux.do/oauth2/token
LINUXDO_USER_INFO_URL=https://connect.linux.do/api/user
